webpackJsonp([3],{"3L6B":function(t,i){},"5sLO":function(t,i){},"66nS":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("IHPB"),o=e.n(a),s=e("AAo7"),n=e("0xDb"),r=e("Gl1R"),c=e("6rJY"),l={components:{"login-mode-dialog":e("MTC2").a,"gift-item":r.a,"gift-dialog":c.a},data:function(){return{showLoginModeDialog:!1,showGiftDialog:!1,dataLoading:!1,allDataLoaded:!1,giftData:{},pageIndex:1,giftList:[],timeoutId:null,hallModule:null,loadmoreModule:null,userData:Object(n.h)()}},watch:{allDataLoaded:function(t,i){t&&window.removeEventListener("scroll",this.scrollEvent,!1)}},destroyed:function(){window.removeEventListener("scroll",this.scrollEvent,!1)},mounted:function(){this.getGifts("firstGet"),this.hallModule=this.$refs.hallModule,this.loadmoreModule=this.$refs.loadmore,window.addEventListener("scroll",this.scrollEvent,!1)},methods:{hideModeDialog:function(){this.showLoginModeDialog=!1},hideGiftDialog:function(t){this.showGiftDialog=t},handlerPhoneSign:function(t){this.userData=t,this.showLoginModeDialog=!1,window.location.reload()},getCurGift:function(t){var i=this;if(this.userData){var e={channel:$GLOBAL_CONST.channel,uid:this.userData.user.id,token:this.userData.token,gift_id:t.gift_id};this.$api.decipherPost(s.a.GETGIFT,e,function(e){switch(e.status){case 300001:i.$toast("礼包已下线");break;case 300002:i.$toast("礼包未开放领取");break;case 300003:i.$toast("礼包已领完");break;case 300004:i.$toast("领取礼包失败");break;default:e.decryptData&&e.decryptData.item?(i.giftData=t,i.giftData.cdkey=e.decryptData.item.cdkey,i.showGiftDialog=!0,i.giftData.remain-=1,i.giftData.remain<0&&(i.giftData.remain=0)):i.$toast("领取礼包失败")}})}else this.showLoginModeDialog=!0},showGift:function(t){this.giftData=t,this.showGiftDialog=!0},getGifts:function(t){var i=this;if(!this.dataLoading){this.dataLoading=!0;var e={channel:$GLOBAL_CONST.channel,size:10,page:this.pageIndex,uid:this.userData?this.userData.user.id:"",token:this.userData?this.userData.token:""};e.page<1&&(e.page=1),this.$api.decipherPost(s.a.GIFTLIST,e,function(a){i.dataLoading=!1,a.decryptData&&a.decryptData.gifts.length?(i.giftList=[].concat(o()(i.giftList),o()(a.decryptData.gifts)),a.decryptData.gifts.length<e.size?i.allDataLoaded=!0:(i.allDataLoaded=!1,"firstGet"===t&&i.$nextTick(function(){i.multiGet()}))):i.allDataLoaded=!0},function(){i.dataLoading=!1,i.pageIndex--})}},multiGet:function(){var t=this.loadmoreModule.getBoundingClientRect().top;t&&t<=window.innerHeight-45&&this.loadMore()},loadMore:function(){this.pageIndex++,this.getGifts()},scrollEvent:function(){this.dataLoading||(this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.multiGet,50))}}},d={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"hallModule",staticClass:"gift-page-layer"},[e("div",[e("div",{staticClass:"gift-list-wraper last-noborder"},t._l(t.giftList,function(i,a){return e("gift-item",{key:"gift"+a,attrs:{giftData:i},on:{showGift:t.showGift,getGift:t.getCurGift}})})),t._v(" "),e("div",{staticClass:"loadmore-box"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.allDataLoaded,expression:"!allDataLoaded"}],ref:"loadmore"},[t.dataLoading?e("div",{staticClass:"load-status"},[e("mt-spinner",{staticClass:"load-icon",attrs:{type:"snake",color:"#26a2ff",size:18}}),t._v(" "),e("span",{staticClass:"loading-text"},[t._v("加载中…")])],1):e("div",{staticClass:"load-status",on:{click:t.loadMore}},[e("p",{staticClass:"nomore"},[t._v("加载更多")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.allDataLoaded,expression:"allDataLoaded"}],staticClass:"load-status"},[e("p",{staticClass:"nomore"},[t._v("鸭鸭也是有底线的~")])])])]),t._v(" "),!t.userData&&t.showLoginModeDialog?[e("div",{staticClass:"login-mode-layer"},[e("login-mode-dialog",{attrs:{responseEvent:!0},on:{signByPhone:t.handlerPhoneSign,hide:t.hideModeDialog}})],1)]:t._e(),t._v(" "),t.showGiftDialog?e("div",[e("gift-dialog",{attrs:{giftData:t.giftData},on:{change:t.hideGiftDialog}})],1):t._e()],2)},staticRenderFns:[]};var h=e("vSla")(l,d,!1,function(t){e("eGqc")},"data-v-f8534b94",null);i.default=h.exports},"6rJY":function(t,i,e){"use strict";var a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"common-mask-dialog mt-20",class:{"no-mask":t.exitGameBox},on:{click:function(i){return i.stopPropagation(),t.closeDialog(i)}}},[e("div",{staticClass:"common-box",on:{click:function(i){return i.stopPropagation(),t.preventClick(i)}}},[e("i",{staticClass:"icon icon-gift-close",on:{click:t.closeDialog}}),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"body"},[e("a",{staticClass:"cdkey"},[t._v(t._s(t.giftData.cdkey))]),t._v(" "),e("a",{ref:"copy",staticClass:"copy mt16",attrs:{"data-clipboard-text":t.giftData.cdkey},on:{click:function(i){return i.stopPropagation(),t.copyCdkey(i)}}},[t._v("复制兑换码")])])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"head"},[i("p",[this._v("礼包兑换码已领取")]),this._v(" "),i("p",[this._v("请复制后在游戏内兑换使用")])])}]};var o=e("vSla")({props:["giftData"],data:function(){return{copyBtn:null}},mounted:function(){this.copyBtn=new this.$clipboard(this.$refs.copy)},computed:{exitGameBox:function(){return this.$store.state.game.exitlayer.show}},methods:{preventClick:function(){return!1},closeDialog:function(){this.$emit("change",!1)},copyCdkey:function(){var t=this;this.copyBtn.on("success",function(){t.$toast({message:"复制成功，请在游戏内兑换",duration:2e3})})}}},a,!1,function(t){e("3L6B")},"data-v-1be47e22",null);i.a=o.exports},"9+Lw":function(t,i,e){"use strict";var a=e("3cXf"),o=e.n(a),s=e("AAo7"),n=e("0xDb"),r={data:function(){return{gettingCodeTag:!1,loginData:{phone:"",smsCode:""},count:60,showCodeBox:!0,guestData:Object(n.f)()}},computed:{exitGameBox:function(){return this.$store.state.game.exitlayer.show}},methods:{preventClick:function(){return!1},closeDialog:function(){this.$emit("change",!1)},checkPhoneNum:function(){var t=!1;return this.loginData.phone?n.b.check("mobile",this.loginData.phone)?t=!0:this.$toast("手机号码格式不正确"):this.$toast("请输入手机号码"),t},getSmsCode:function(){this.checkPhoneNum()&&this.getIdentiCode()},getIdentiCode:function(){var t=this;if(!this.gettingCodeTag){this.gettingCodeTag=!0;var i={phone:this.loginData.phone,channel:$GLOBAL_CONST.channel};this.$api.decipherPost(s.a.SMSCODE,i,function(i){t.gettingCodeTag=!1,t.showCodeBox=!1;var e=t.count;!function i(){var a=setTimeout(i,1e3);t.count--,0==t.count&&(clearTimeout(a),t.showCodeBox=!0,t.count=e)}()},function(){t.gettingCodeTag=!1,t.showCodeBox=!0,t.$toast("系统君抽风，请稍候再来骚扰")})}},login:function(){var t=this;if(this.loginData.phone)if(n.b.check("mobile",this.loginData.phone))if(this.loginData.smsCode)if(n.b.check("smsCode",this.loginData.smsCode)){var i={phone:this.loginData.phone,code:this.loginData.smsCode,channel:$GLOBAL_CONST.channel};this.guestData&&(i.uid=this.guestData.uid,i.token=this.guestData.token),this.$api.decipherPost(s.a.LOGIN,i,function(i){if(0==i.status&&i.decryptData){n.a.del("TDY_GUESTDATA"),localStorage.removeItem("TDY_GUESTDATA"),n.a.set("TDY_USERINFO",o()(i.decryptData),1728e3),localStorage.setItem("TDY_USERINFO",o()(i.decryptData)),sessionStorage.setItem("TDY_SESSIONID",i.decryptData.sessionId),t.$emit("signin",i.decryptData)}else t.$toast(i.message)},function(){t.$toast("系统君抽风，请稍候再来骚扰")})}else this.$toast("验证码格式不正确");else this.$toast("请输入验证码");else this.$toast("手机号码格式不正确");else this.$toast("请输入手机号码")}}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"common-mask-dialog mt-20",class:{"no-mask":t.exitGameBox},on:{click:function(i){return i.stopPropagation(),t.closeDialog(i)}}},[e("div",{staticClass:"common-box phone-box",on:{click:function(i){return i.stopPropagation(),t.preventClick(i)}}},[e("p",{staticClass:"title"},[t._v("登录游戏")]),t._v(" "),e("div",{staticClass:"content mt30"},[e("i",{staticClass:"icon icon-login-phone"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.loginData.phone,expression:"loginData.phone",modifiers:{trim:!0}}],staticClass:"phonenum",attrs:{maxlength:"11",type:"tel",placeholder:"请输入手机号码"},domProps:{value:t.loginData.phone},on:{input:function(i){i.target.composing||t.$set(t.loginData,"phone",i.target.value.trim())},blur:function(i){t.$forceUpdate()}}})]),t._v(" "),e("div",{staticClass:"content mt20"},[e("i",{staticClass:"icon icon-login-sms"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.loginData.smsCode,expression:"loginData.smsCode",modifiers:{trim:!0}}],staticClass:"smscode",attrs:{maxlength:"6",type:"tel",placeholder:"请输入短信验证码"},domProps:{value:t.loginData.smsCode},on:{input:function(i){i.target.composing||t.$set(t.loginData,"smsCode",i.target.value.trim())},blur:function(i){t.$forceUpdate()}}}),t._v(" "),t.showCodeBox?e("a",{staticClass:"text",on:{click:t.getSmsCode}},[t._v("发送验证码")]):e("a",{staticClass:"text disabled"},[t._v(t._s(t.count)+"秒后重新发送")])]),t._v(" "),e("a",{staticClass:"login-btn",on:{click:function(i){return i.stopPropagation(),t.login(i)}}},[t._v("登录")])])])},staticRenderFns:[]};var l=e("vSla")(r,c,!1,function(t){e("hMef")},"data-v-32f77653",null);i.a=l.exports},Gl1R:function(t,i,e){"use strict";var a={props:["giftData","hideIcon","open","isFloat"],data:function(){return{openGiftCon:!1,scalePer:"0%",loaded:0}},watch:{"giftData.remain":function(t,i){this.initProgress(this.giftData)}},mounted:function(){if(!this.hideIcon){var t=this,i=this.$refs.gameIcon;i.addEventListener("load",function(){t.loaded=1},!1),i.addEventListener("error",function(){t.loaded=0},!1),i.src=this.giftData.gameIcon}this.initProgress(this.giftData),this.hideIcon&&(this.$refs.progress.style.width="48%")},methods:{initProgress:function(t){if(!t.bxl){var i=0;t.total&&(i=Math.ceil(t.remain/t.total*100))>100&&(i=100),this.scalePer=i+"%",this.$refs.progressbar.style.width=this.scalePer}},getGift:function(){this.$emit("getGift",this.giftData)},showGift:function(){this.$emit("showGift",this.giftData)},toGiftDetail:function(){this.open?this.openGiftCon=!this.openGiftCon:this.$router.push({path:"gifts/detail/"+this.giftData.gift_id,query:this.$route.query})}}},o={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"gift-item",class:{"float-item":t.isFloat},on:{click:function(i){return i.stopPropagation(),t.toGiftDetail(i)}}},[t.hideIcon?t._e():a("div",{staticClass:"icon-box fl"},[a("div",{staticClass:"img-cont",class:{bgw:1==t.loaded}},[a("img",{directives:[{name:"show",rawName:"v-show",value:1==t.loaded,expression:"loaded == 1"}],ref:"gameIcon",staticClass:"game-icon",attrs:{alt:""}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:0==t.loaded,expression:"loaded == 0"}],staticClass:"game-icon_loading",attrs:{src:e("p/op"),alt:""}})])]),t._v(" "),a("div",{staticClass:"fr",class:{mt9:t.hideIcon,mt18:!t.hideIcon}},[t.giftData.cdkey?a("a",{staticClass:"common-btn check-btn",on:{click:function(i){return i.stopPropagation(),t.showGift(i)}}},[t._v("查看")]):a("a",{staticClass:"common-btn gift-btn",on:{click:function(i){return i.stopPropagation(),t.getGift(i)}}},[t._v("领取")])]),t._v(" "),a("div",{staticClass:"info-box",class:{"no-icon":t.hideIcon}},[a("p",{staticClass:"title ellipsis"},[t._v(t._s(t.giftData.name))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.openGiftCon,expression:"openGiftCon"}],domProps:{innerHTML:t._s(t.giftData.content)}}),t._v(" "),a("div",{staticClass:"progress-box font12"},[t.giftData.bxl?[a("span",[t._v("礼包剩余：不限量")])]:[a("span",[t._v("礼包剩余")]),t._v(" "),a("span",{ref:"progress",staticClass:"progress clearfix"},[a("span",{ref:"progressbar",attrs:{id:"progress-bar"}})]),t._v(" "),a("span",[t._v(t._s(t.scalePer))])]],2)])])},staticRenderFns:[]};var s=e("vSla")(a,o,!1,function(t){e("5sLO")},"data-v-69740737",null);i.a=s.exports},IHPB:function(t,i,e){"use strict";i.__esModule=!0;var a,o=e("kfHR"),s=(a=o)&&a.__esModule?a:{default:a};i.default=function(t){if(Array.isArray(t)){for(var i=0,e=Array(t.length);i<t.length;i++)e[i]=t[i];return e}return(0,s.default)(t)}},MTC2:function(t,i,e){"use strict";var a=e("AAo7"),o=e("0xDb"),s={components:{"phone-signin-box":e("9+Lw").a},props:["responseEvent","payByLink"],data:function(){return{isOwnClient:$GLOBAL_CONST.isOwnClient,userData:null,showPhoneDialog:!1}},mounted:function(){window.loginCallBack=this.loginCallBack},computed:{exitGameBox:function(){return this.$store.state.game.exitlayer.show}},methods:{loginCallBack:function(t,i,e){if(t&&e){var a=JSON.parse(e);o.a.del("TDY_GUESTDATA"),localStorage.removeItem("TDY_GUESTDATA"),o.a.set("TDY_USERINFO",e,1728e3),localStorage.setItem("TDY_USERINFO",e),sessionStorage.setItem("TDY_SESSIONID",a.sessionId),this.handlerSign&&this.handlerSign(a)}},closeDialog:function(){return this.responseEvent&&this.$emit("hide",!1),!1},preventClick:function(){return!1},hidePhoneDialog:function(t){this.showPhoneDialog=t},toTermPage:function(){var t=this.$route.query,i=Object(o.o)(t),e=window.location.origin+"/personal/agreement"+i;/\/pre/.test(window.location.pathname)&&(e=window.location.origin+"/pre/personal/agreement"+i),window.location.href=e},handlerSign:function(t){this.$toast({message:"登录成功，游戏加载中…",duration:1200}),this.$emit("signByPhone",t)},loginByWX:function(){window.jsInvoke.nativeLogin("wx")},loginByQQ:function(){this.isOwnClient?$GLOBAL_CONST.isOwnClientIos?this.getAuth("qq"):window.jsInvoke.nativeLogin("qq"):this.getAuth("qq")},getAuth:function(t){var i=this;this.$indicator.open();var e=""+this.$route.path,o=encodeURIComponent(e),s=window.location.href.replace(e,"/proxy_qq");-1!==s.indexOf("?")?s+="&fromPage="+o:s+="?fromPage="+o;var n={form:t,channel:$GLOBAL_CONST.channel,redirect_uri:s};this.$api.decipherPost(a.a.AUTHEXCHANGE,n,function(t){i.$indicator.close(),0==t.status?window.location.href=t.decryptData.authorize_url:i.$toast(t.message)},function(){i.$indicator.close(),i.$toast("系统君抽风，请稍候再来骚扰")})},loginByPhone:function(){this.showPhoneDialog=!0}}},n={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"common-mask-dialog login-dialog mt-20",class:{translucence:!t.showPhoneDialog&&!t.exitGameBox},on:{click:function(i){return i.stopPropagation(),t.closeDialog(i)}}},[e("div",{staticClass:"common-box dialog mt-20",on:{click:function(i){return i.stopPropagation(),t.preventClick(i)}}},[t._m(0),t._v(" "),e("div",{staticClass:"mode-body mt34"},[t.isOwnClient?e("a",{staticStyle:{width:"33.2%"},on:{click:t.loginByWX}},[e("i",{staticClass:"icon icon-mode-wx"}),t._v(" "),e("p",{staticClass:"mt8 font12"},[t._v("微信登录")])]):t._e(),t._v(" "),e("a",{class:{width50:!t.isOwnClient},on:{click:t.loginByQQ}},[e("i",{staticClass:"icon icon-mode-qq"}),t._v(" "),e("p",{staticClass:"mt8 font12"},[t._v("QQ登录")])]),t._v(" "),e("a",{class:{width50:!t.isOwnClient},on:{click:t.loginByPhone}},[e("i",{staticClass:"icon icon-mode-p"}),t._v(" "),e("p",{staticClass:"mt8 font12"},[t._v("手机登录")])])]),t._v(" "),e("div",{staticClass:"mode-footer mt45"},[t._v("\n        登录即代表你已经阅读并知晓"),e("span",{staticClass:"ml4",on:{click:t.toTermPage}},[t._v("用户协议")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPhoneDialog,expression:"showPhoneDialog"}]},[e("phone-signin-box",{on:{signin:t.handlerSign,change:t.hidePhoneDialog}})],1)])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"mode-header"},[i("i",{staticClass:"mr8 fl"}),this._v(" "),i("i",{staticClass:"ml8 fr"}),this._v(" "),i("span",[this._v("选择登录方式")])])}]};var r=e("vSla")(s,n,!1,function(t){e("w1tj")},"data-v-8c00a8d4",null);i.a=r.exports},eGqc:function(t,i){},hMef:function(t,i){},kfHR:function(t,i,e){t.exports={default:e("qQfv"),__esModule:!0}},kksE:function(t,i,e){"use strict";var a=e("lIiZ"),o=e("go9Q");t.exports=function(t,i,e){i in t?a.f(t,i,o(0,e)):t[i]=e}},"p/op":function(t,i,e){t.exports=e.p+"static/img/seat.aa167b4.svg"},qQfv:function(t,i,e){e("IsPG"),e("yrDz"),t.exports=e("AKd3").Array.from},w1tj:function(t,i){},yrDz:function(t,i,e){"use strict";var a=e("WwGG"),o=e("FITv"),s=e("OXaN"),n=e("kDTw"),r=e("V2W7"),c=e("CFGK"),l=e("kksE"),d=e("YW8S");o(o.S+o.F*!e("75+0")(function(t){Array.from(t)}),"Array",{from:function(t){var i,e,o,h,u=s(t),f="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,v=void 0!==m,p=0,D=d(u);if(v&&(m=a(m,g>2?arguments[2]:void 0,2)),void 0==D||f==Array&&r(D))for(e=new f(i=c(u.length));i>p;p++)l(e,p,v?m(u[p],p):u[p]);else for(h=D.call(u),e=new f;!(o=h.next()).done;p++)l(e,p,v?n(h,m,[o.value,p],!0):o.value);return e.length=p,e}})}});