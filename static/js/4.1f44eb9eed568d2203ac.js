webpackJsonp([4],{"1epA":function(t,a,e){t.exports=e.p+"static/img/download.f94a8f0.gif"},"49uY":function(t,a,e){"use strict";var i=e("3cXf"),s=e.n(i),n=e("4YfN"),o=e.n(n),c=e("0xDb"),r=e("AAo7"),l={data:function(){return{hasRecentTag:!1,userData:null,recordGameList:[{gameIcon:"",gameName:""}]}},props:["showTitle","fromPersonal"],created:function(){this.userData=Object(c.h)(),this.getRecordGame()},methods:{enterCurGame:function(t){if(Object(c.n)(t),_czc&&_czc.push(["_trackEvent","最近在玩-进入游戏-"+t.gameName,"zjzw_game_"+t.gameId+"_from_"+$GLOBAL_CONST.channel]),window.jsInvoke&&window.jsInvoke.getEnvironmentInfo&&window.jsInvoke.goToUrlByFullScreen)if(t.isCP){var a=window.location.origin+"/game/play?_tdygid="+t.gameId+"&channel="+$GLOBAL_CONST.channel;/\/pre/.test(window.location.pathname)&&(a=window.location.origin+"/pre/game/play?_tdygid="+t.gameId+"&channel="+$GLOBAL_CONST.channel),window.jsInvoke.goToUrlByFullScreen(a)}else window.jsInvoke.goToUrlByFullScreen(t.gameUrl);else t.isCP?this.enterGame(t.gameId):window.location.href=t.gameUrl},enterGame:function(t){var a={_tdygid:t},e=o()({},a,this.$route.query);Object(c.k)(e)},loadImg:function(t){for(var a=function(a){var e=t[a],i=document.getElementById("recentGameIcon"+a);i.addEventListener("load",function(){e.loaded=1},!1),i.addEventListener("error",function(){e.loaded=0},!1),i.src=e.gameIcon},e=0;e<t.length;e++)a(e)},getRecordGame:function(){var t=this;if(this.fromPersonal){var a={channel:$GLOBAL_CONST.channel,nickname:this.userData?this.userData.user.nickname:"",sex:this.userData?this.userData.user.sex:0,uid:this.userData?this.userData.user.id:"",token:this.userData?this.userData.token:"",size:10};this.$api.decipherPost(r.a.GETRECORDGAME,a,function(a){if(0===a.status&&a.decryptData.games&&a.decryptData.games.length){var e=a.decryptData.games.map(function(t){return t.loaded=0,t});t.recordGameList=e,localStorage.setItem("RECORDGAME",s()(e)),t.$emit("show",e),t.hasRecentTag=!0,t.$nextTick(function(){t.loadImg(t.recordGameList)})}else t.$emit("show",[])},function(){t.$emit("show",[])})}else{var e=localStorage.getItem("RECORDGAME");if(e){var i=JSON.parse(e).map(function(t){return t.loaded=0,t});this.recordGameList=i,this.$emit("show",!0),this.hasRecentTag=!0,this.$nextTick(function(){t.loadImg(t.recordGameList)})}}}}},d={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[t.hasRecentTag?i("div",{staticClass:"recent-game-box"},[t.showTitle?i("div",{staticClass:"title"},[i("p",[t._v("最近在玩")])]):t._e(),t._v(" "),i("div",{staticClass:"recent-main-wraper"},[i("div",{staticClass:"main-box"},t._l(t.recordGameList,function(a,s){return i("a",{key:a.gameId+s,staticClass:"game-item",on:{click:function(e){t.enterCurGame(a)}}},[i("div",{staticClass:"img-cont",class:{bgw:1==a.loaded}},[i("img",{directives:[{name:"show",rawName:"v-show",value:1==a.loaded,expression:"item.loaded == 1"}],staticClass:"img",attrs:{id:"recentGameIcon"+s,alt:""}}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:0==a.loaded,expression:"item.loaded == 0"}],staticClass:"img_loading",attrs:{src:e("p/op"),alt:""}})]),t._v(" "),i("div",{staticClass:"game-name ellipsis"},[t._v(t._s(a.gameName))])])}))])]):t._e()])},staticRenderFns:[]};var u=e("vSla")(l,d,!1,function(t){e("aYfK")},"data-v-763a966b",null);a.a=u.exports},"9+Lw":function(t,a,e){"use strict";var i=e("3cXf"),s=e.n(i),n=e("AAo7"),o=e("0xDb"),c={data:function(){return{gettingCodeTag:!1,loginData:{phone:"",smsCode:""},count:60,showCodeBox:!0,guestData:Object(o.f)()}},computed:{exitGameBox:function(){return this.$store.state.game.exitlayer.show}},methods:{preventClick:function(){return!1},closeDialog:function(){this.$emit("change",!1)},checkPhoneNum:function(){var t=!1;return this.loginData.phone?o.b.check("mobile",this.loginData.phone)?t=!0:this.$toast("手机号码格式不正确"):this.$toast("请输入手机号码"),t},getSmsCode:function(){this.checkPhoneNum()&&this.getIdentiCode()},getIdentiCode:function(){var t=this;if(!this.gettingCodeTag){this.gettingCodeTag=!0;var a={phone:this.loginData.phone,channel:$GLOBAL_CONST.channel};this.$api.decipherPost(n.a.SMSCODE,a,function(a){t.gettingCodeTag=!1,t.showCodeBox=!1;var e=t.count;!function a(){var i=setTimeout(a,1e3);t.count--,0==t.count&&(clearTimeout(i),t.showCodeBox=!0,t.count=e)}()},function(){t.gettingCodeTag=!1,t.showCodeBox=!0,t.$toast("系统君抽风，请稍候再来骚扰")})}},login:function(){var t=this;if(this.loginData.phone)if(o.b.check("mobile",this.loginData.phone))if(this.loginData.smsCode)if(o.b.check("smsCode",this.loginData.smsCode)){var a={phone:this.loginData.phone,code:this.loginData.smsCode,channel:$GLOBAL_CONST.channel};this.guestData&&(a.uid=this.guestData.uid,a.token=this.guestData.token),this.$api.decipherPost(n.a.LOGIN,a,function(a){if(0==a.status&&a.decryptData){o.a.del("TDY_GUESTDATA"),localStorage.removeItem("TDY_GUESTDATA"),o.a.set("TDY_USERINFO",s()(a.decryptData),1728e3),localStorage.setItem("TDY_USERINFO",s()(a.decryptData)),sessionStorage.setItem("TDY_SESSIONID",a.decryptData.sessionId),t.$emit("signin",a.decryptData)}else t.$toast(a.message)},function(){t.$toast("系统君抽风，请稍候再来骚扰")})}else this.$toast("验证码格式不正确");else this.$toast("请输入验证码");else this.$toast("手机号码格式不正确");else this.$toast("请输入手机号码")}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"common-mask-dialog mt-20",class:{"no-mask":t.exitGameBox},on:{click:function(a){return a.stopPropagation(),t.closeDialog(a)}}},[e("div",{staticClass:"common-box phone-box",on:{click:function(a){return a.stopPropagation(),t.preventClick(a)}}},[e("p",{staticClass:"title"},[t._v("登录游戏")]),t._v(" "),e("div",{staticClass:"content mt30"},[e("i",{staticClass:"icon icon-login-phone"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.loginData.phone,expression:"loginData.phone",modifiers:{trim:!0}}],staticClass:"phonenum",attrs:{maxlength:"11",type:"tel",placeholder:"请输入手机号码"},domProps:{value:t.loginData.phone},on:{input:function(a){a.target.composing||t.$set(t.loginData,"phone",a.target.value.trim())},blur:function(a){t.$forceUpdate()}}})]),t._v(" "),e("div",{staticClass:"content mt20"},[e("i",{staticClass:"icon icon-login-sms"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.loginData.smsCode,expression:"loginData.smsCode",modifiers:{trim:!0}}],staticClass:"smscode",attrs:{maxlength:"6",type:"tel",placeholder:"请输入短信验证码"},domProps:{value:t.loginData.smsCode},on:{input:function(a){a.target.composing||t.$set(t.loginData,"smsCode",a.target.value.trim())},blur:function(a){t.$forceUpdate()}}}),t._v(" "),t.showCodeBox?e("a",{staticClass:"text",on:{click:t.getSmsCode}},[t._v("发送验证码")]):e("a",{staticClass:"text disabled"},[t._v(t._s(t.count)+"秒后重新发送")])]),t._v(" "),e("a",{staticClass:"login-btn",on:{click:function(a){return a.stopPropagation(),t.login(a)}}},[t._v("登录")])])])},staticRenderFns:[]};var l=e("vSla")(c,r,!1,function(t){e("hMef")},"data-v-32f77653",null);a.a=l.exports},"9dvs":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i,s=e("a3Yh"),n=e.n(s),o=e("4YfN"),c=e.n(o),r=e("AAo7"),l=(e("gyMJ"),e("0xDb")),d=e("9+Lw"),u=e("49uY"),h={components:{"phone-signin-box":d.a,"recent-game":u.a},data:function(){return{isLYChannel:$GLOBAL_CONST.isLYChannel,isOwnClient:$GLOBAL_CONST.isOwnClient,isSignIn:!1,isThirdPlatform:$GLOBAL_CONST.isThirdPlatform,isInWX:$GLOBAL_CONST.isInWX,showPhoneDialog:!1,userData:{token:"",user:{avatar:"",phone:"",nickname:"",certified:""}},appLink:"https://youxicdn.tangdaoya.com/package/yaya_android.apk",isIOS:Object(l.j)(),recordGameList:[],env:Object(l.e)(),getRecordTag:!1,querysObj:this.$route.query,avatarLoaded:!1,userWallet:{balance:""}}},created:function(){window.loginCallBack=this.loginCallBack,this.userData=Object(l.h)(),this.userData&&this.userData.token&&(this.isSignIn=!0)},computed:{showLoadingBox:function(){return(this.isInWX||this.isLYChannel||this.isThirdPlatform)&&!this.isSignIn&&"online"==this.env}},watch:{isSignIn:function(t){var a=this;t&&(this.isLYChannel||this.getWallet(),this.$nextTick(function(){a.getAvatar&&a.getAvatar()}))}},methods:(i={showHistoryModule:function(t){this.recordGameList=t,this.getRecordTag=!0},toWallt:function(){this.$router.push({path:"/personal/wallt",query:this.querysObj})},getWallet:function(){var t=this,a={channel:$GLOBAL_CONST.channel,uid:this.userData.user.id,token:this.userData.token};this.$api.decipherPost(r.a.GETPAYWALLET,a,function(a){0==a.status?t.userWallet=a.decryptData.wallet:t.$toast("游戏币信息获取失败，请刷新重试")})},getAvatar:function(){var t=this,a=document.getElementById("avatar");a.addEventListener("load",function(){t.avatarLoaded=!0},!1),a.addEventListener("error",function(){t.avatarLoaded=!1},!1),a.src=this.userData.user.avatar},preventClick:function(){return!1},loginCallBack:function(t,a,e){var i=JSON.parse(e);e&&t&&(l.a.del("TDY_GUESTDATA"),localStorage.removeItem("TDY_GUESTDATA"),l.a.set("TDY_USERINFO",e,1728e3),localStorage.setItem("TDY_USERINFO",e),sessionStorage.setItem("TDY_SESSIONID",i.sessionId),this.userData=i,this.isSignIn=!0,window.loaction.reload())},jumpToLoadpage:function(){Object(l.l)(this.$route.query)},loadApp:function(){_czc&&_czc.push(["_trackEvent","个人中心下载APP事件","personal_page_load_app"]),this.isInWX||this.isIOS?this.jumpToLoadpage():window.location.href=this.appLink},toParentPage:function(){this.$router.push({path:"/homepage",query:this.querysObj})},toInfoPage:function(){this.userData&&this.userData.token&&this.$router.push({path:"/personal/info",query:this.querysObj})}},n()(i,"toWallt",function(){this.$router.push({path:"/personal/wallt",query:this.querysObj})}),n()(i,"hidePhoneDialog",function(t){this.showPhoneDialog=t}),n()(i,"handlerSign",function(t){window.location.reload()}),n()(i,"loginByQQ",function(){this.isOwnClient?$GLOBAL_CONST.isOwnClientIos?this.getAuth("qq"):window.jsInvoke.nativeLogin("qq"):this.getAuth("qq")}),n()(i,"loginByWX",function(){window.jsInvoke.nativeLogin("wx")}),n()(i,"enterActivity",function(){_czc&&_czc.push(["_trackEvent","个人中心活动图片进入屠龙破晓游戏","personal_enter_TLPX_activity"]);var t={_tdygid:"tlpx"},a=c()({},t,this.$route.query);Object(l.k)(a)}),n()(i,"getAuth",function(t){var a=this;this.$indicator.open();var e=""+this.$route.path,i=encodeURIComponent(e),s=window.location.href.replace(e,"/proxy_qq");-1!==s.indexOf("?")?s+="&fromPage="+i:s+="?fromPage="+i;var n={form:t,channel:$GLOBAL_CONST.channel,redirect_uri:s};this.$api.decipherPost(r.a.AUTHEXCHANGE,n,function(t){a.$indicator.close(),window.location.href=t.decryptData.authorize_url},function(){a.$indicator.close()})}),n()(i,"toTermPage",function(){this.$router.push({path:"/personal/agreement",query:this.querysObj})}),n()(i,"toChildPage",function(t){switch(t){case"agreement":_czc&&_czc.push(["_trackEvent","用户条款","page_user_agreement"]);break;case"addiction":_czc&&_czc.push(["_trackEvent","防沉迷系统说明","page_user_addiction"]);break;case"identify":if(this.userData.user.certified)return;_czc&&_czc.push(["_trackEvent","实名认证","page_user_identify"]);break;case"custom":_czc&&_czc.push(["_trackEvent","客服中心","page_user_custom"])}"identify"==t&&this.userData.user.certified||this.$router.push({path:"/personal/"+t,query:this.querysObj})}),i)},g={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"my-page-layer"},[t.isSignIn?[i("div",{staticClass:"account-box",on:{click:function(a){return a.stopPropagation(),t.toInfoPage(a)}}},[i("div",{staticClass:"contain"},[i("div",{staticClass:"avatar-box"},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.avatarLoaded,expression:"avatarLoaded"}],attrs:{id:"avatar",alt:"头像"}}),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.avatarLoaded,expression:"!avatarLoaded"}],staticClass:"icon icon-avatar"})]),t._v(" "),i("i",{staticClass:"icon icon-arrow-r-b"}),t._v(" "),i("div",{staticClass:"info-box"},[i("span",{staticClass:"nickname"},[t._v(t._s(t.userData.user.phone||t.userData.user.nickname))]),t._v(" "),i("img",{staticClass:"download",attrs:{src:e("1epA"),alt:""},on:{click:function(a){return a.stopPropagation(),t.loadApp(a)}}})])])]),t._v(" "),i("recent-game",{attrs:{showTitle:!0,fromPersonal:!0},on:{show:t.showHistoryModule}}),t._v(" "),t.recordGameList.length?i("p",{staticClass:"split-line small"}):t._e(),t._v(" "),t.recordGameList.length&&t.getRecordTag?i("img",{staticClass:"activity_game",attrs:{src:"https://youxicdn.tangdaoya.com/banner/tlpx.gif",alt:""},on:{click:t.enterActivity}}):t._e(),t._v(" "),i("div",{staticClass:"user-info-list"},[t.isLYChannel?t._e():i("div",{staticClass:"list-item",on:{click:t.toWallt}},[i("i",{staticClass:"icon icon-cz fl mt16"}),t._v(" "),i("i",{staticClass:"icon icon-arrow-r fr mt20"}),t._v(" "),i("a",{staticClass:"balance mr8 fr mt18"},[t._v("余额："+t._s(""===t.userWallet.balance?"":t.userWallet.balance/10)+"游戏币")]),t._v(" "),i("span",{staticClass:"ml16"},[t._v("账户充值")])]),t._v(" "),i("div",{staticClass:"list-item",on:{click:function(a){t.toChildPage("expenseslist")}}},[i("i",{staticClass:"icon icon-xf fl mt16"}),t._v(" "),i("i",{staticClass:"icon icon-arrow-r fr mt20"}),t._v(" "),i("span",{staticClass:"ml16"},[t._v("消费记录")])]),t._v(" "),i("div",{staticClass:"list-item",on:{click:function(a){t.toChildPage("identify")}}},[i("i",{staticClass:"icon icon-sm fl mt16"}),t._v(" "),t.userData.user.certified?i("i",{staticClass:"fr mt20"},[t._v(t._s(t.userData.user.id_no))]):i("i",{staticClass:"icon icon-arrow-r fr mt20"}),t._v(" "),i("span",{staticClass:"ml16"},[t._v("实名认证")])]),t._v(" "),i("div",{staticClass:"list-item",on:{click:function(a){t.toChildPage("addiction")}}},[i("i",{staticClass:"icon icon-fcm fl mt16"}),t._v(" "),i("i",{staticClass:"icon icon-arrow-r fr mt20"}),t._v(" "),i("span",{staticClass:"ml16"},[t._v("防沉迷系统说明")])]),t._v(" "),i("div",{staticClass:"list-item",on:{click:function(a){t.toChildPage("agreement")}}},[i("i",{staticClass:"icon icon-tk fl mt16"}),t._v(" "),i("i",{staticClass:"icon icon-arrow-r fr mt20"}),t._v(" "),i("span",{staticClass:"ml16"},[t._v("用户协议")])]),t._v(" "),i("div",{staticClass:"list-item",on:{click:function(a){t.toChildPage("custom")}}},[i("i",{staticClass:"icon icon-kf fl mt16"}),t._v(" "),i("i",{staticClass:"icon icon-arrow-r fr mt20"}),t._v(" "),i("span",{staticClass:"ml16"},[t._v("客服中心")])])]),t._v(" "),!t.recordGameList.length&&t.getRecordTag?i("img",{staticClass:"activity_game mt12",attrs:{src:"https://youxicdn.tangdaoya.com/banner/tlpx.gif",alt:""},on:{click:t.enterActivity}}):t._e()]:[i("div",{staticClass:"main-login-layer"},[i("div",{staticClass:"head-wraper",staticStyle:{background:"#F3D420"}},[i("i",{staticClass:"icon icon-arrow-l",on:{click:t.toParentPage}})]),t._v(" "),t._m(0),t._v(" "),t.showLoadingBox?t._e():i("div",{staticClass:"main-mode-layer"},[t._m(1),t._v(" "),i("div",{staticClass:"mode-body mt34"},[t.isOwnClient?i("a",{staticStyle:{width:"33.2%"},on:{click:t.loginByWX}},[i("i",{staticClass:"icon icon-mode-wx"}),t._v(" "),i("p",{staticClass:"mt8 font12"},[t._v("微信登录")])]):t._e(),t._v(" "),i("a",{class:{width50:!t.isOwnClient},on:{click:t.loginByQQ}},[i("i",{staticClass:"icon icon-mode-qq"}),t._v(" "),i("p",{staticClass:"mt8 font12"},[t._v("QQ登录")])]),t._v(" "),i("a",{class:{width50:!t.isOwnClient},on:{click:function(a){t.showPhoneDialog=!0}}},[i("i",{staticClass:"icon icon-mode-p"}),t._v(" "),i("p",{staticClass:"mt8 font12"},[t._v("手机登录")])])])]),t._v(" "),i("div",{staticClass:"footer"},[t._v("\n\t\t\t\t\t登录即代表你已经阅读并知晓"),i("span",{staticClass:"ml4",on:{click:t.toTermPage}},[t._v("用户协议")])])]),t._v(" "),t.showPhoneDialog?i("div",[i("phone-signin-box",{on:{signin:t.handlerSign,change:t.hidePhoneDialog}})],1):t._e(),t._v(" "),t.showLoadingBox?i("div",{staticClass:"loading-box",on:{click:t.preventClick}},[t._m(2)]):t._e()]],2)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"logo-layer"},[a("img",{attrs:{src:e("WKuw"),alt:""}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"mode-header"},[a("i",{staticClass:"mr8 fl"}),this._v(" "),a("i",{staticClass:"ml8 fr"}),this._v(" "),a("span",[this._v("选择登录方式")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"loading-main"},[a("img",{staticClass:"game-icon_loading",attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSJ3aGl0ZSI+CiAgPHBhdGggb3BhY2l0eT0iLjI1IiBkPSJNMTYgMCBBMTYgMTYgMCAwIDAgMTYgMzIgQTE2IDE2IDAgMCAwIDE2IDAgTTE2IDQgQTEyIDEyIDAgMCAxIDE2IDI4IEExMiAxMiAwIDAgMSAxNiA0Ii8+CiAgPHBhdGggZD0iTTE2IDAgQTE2IDE2IDAgMCAxIDMyIDE2IEwyOCAxNiBBMTIgMTIgMCAwIDAgMTYgNHoiPgogICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjAgMTYgMTYiIHRvPSIzNjAgMTYgMTYiIGR1cj0iMC44cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+CiAgPC9wYXRoPgo8L3N2Zz4K",alt:""}}),this._v(" "),a("p",{staticClass:"loading-text"},[this._v("登录中...")])])}]};var m=e("vSla")(h,g,!1,function(t){e("ExRC")},"data-v-711acb9a",null);a.default=m.exports},ExRC:function(t,a){},JhHb:function(t,a,e){e("SAFe");var i=e("AKd3").Object;t.exports=function(t,a,e){return i.defineProperty(t,a,e)}},SAFe:function(t,a,e){var i=e("FITv");i(i.S+i.F*!e("sjnA"),"Object",{defineProperty:e("lIiZ").f})},WKuw:function(t,a,e){t.exports=e.p+"static/img/tdy_logo.a8b3131.png"},a3Yh:function(t,a,e){"use strict";a.__esModule=!0;var i,s=e("liLe"),n=(i=s)&&i.__esModule?i:{default:i};a.default=function(t,a,e){return a in t?(0,n.default)(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}},aYfK:function(t,a){},hMef:function(t,a){},liLe:function(t,a,e){t.exports={default:e("JhHb"),__esModule:!0}},"p/op":function(t,a,e){t.exports=e.p+"static/img/seat.aa167b4.svg"}});